<% provide(:title, @detection.code) %>
<script>
</script>

<h2>Image Classification</h2>

<!-- Intro -->
<div class="row-fluid">
	<div class="span1 offset1 spot eqh">
		<span class="label label-info">Note</span>
	</div>
	<div class="span7 eqhBase">
		<p>You are now required to...</p>
	</div>
</div>

<!-- the input fields that will hold the variables we will use -->  
<input type='hidden' id='current_page' />  
<input type='hidden' id='show_per_page' /> 


<%= form_tag(save_detection_path(@detection.id), :method=>'post', :multipart => true)  do %>
	
	<div class="row-fluid">
		<div id="page_navigation"></div>
	</div>

	<div class="row-fluid">
		<div class="span12">
			<table>
				<tbody id="content">
				<% (0..9).each do |rows| %>
					<tr>
						<% (0..4).each do |col| %>
							<% k = @image_keys[rows * 5 + col] %>
							<td>
								<div class="thumbnail">
									<a href="#" class="thumbnail">
										<%= image_tag(@images[k][2], alt: k, title: k) %>
									</a>
									<div class="caption">
										<h5>Classify:</h5>
										<label class="radio">
											<%= radio_button_tag( k, "p" ) %>Positive
										</label>
										<label class="radio">
											<%= radio_button_tag( k, "n" ) %>Negative
										</label>
									</div>
								</div>
							</td>
						<% end %>
					</tr>
				<% end %>
				</tbody>
			</table>
		</div>
	</div>

	<div class="row-fluid">
		<div id="page_navigation"></div>
	</div>

	<div class="row-fluid">
		<div class="span5"></div>
		<div class="span2 divCenter">
			<%= submit_tag "Submit", class: "btn btn-large btn-primary" %>
		</div>
		<div class="span2"></div>
		<div class="span3 divCenter">
			<!-- Button to trigger modal -->
			<a href="#trainingModal" role="button" class="btn btn-info btn-large" data-toggle="modal" data-keyboard="true">View Training Samples</a>
		</div>
	</div>

<% end %>

<div class="modal hide fade" id="trainingModal">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>Training Set</h3>
	</div>
	<div class="modal-body">
		<div class="row-fluid">
			<div class="span6 pull-left" id="tbl">
				<%= render :partial => "left_table", :locals => { :detection => @detection } %>
			</div>
			<div class="span6 pull-right" id="tbr">
				<%= render :partial => "right_table", :locals => { :detection => @detection } %>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
	</div>
</div>